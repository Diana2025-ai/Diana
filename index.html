<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
      <title>–î—ñ–∞–Ω–∞ ‚Äî –≥–æ–ª–æ—Å–æ–≤–∏–π –ø–æ–º—ñ—á–Ω–∏–∫</title>
      </head>
      <body>
        <h1>üé§ –î—ñ–∞–Ω–∞ —Å–ª—É—Ö–∞—î...</h1>
          <button id="start">–ù–∞—Ç–∏—Å–Ω–∏ –∞–±–æ —Å–∫–∞–∂–∏ "–î—ñ–∞–Ω–∞"</button>
            <script>
                const openRouterKey = "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";

                    const synth = window.speechSynthesis;
                        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                            const recognition = new SpeechRecognition();
                                recognition.lang = 'uk-UA';
                                    recognition.interimResults = false;
                                        recognition.continuous = false;

                                            const triggerWords = ["–¥—ñ–∞–Ω–∞", "diana"];

                                                document.getElementById("start").onclick = () => {
                                                            recognition.start();
                                                                };

                                                                    recognition.onresult = async (event) => {
                                                                          const said = event.results[0][0].transcript.toLowerCase();
                                                                                console.log("–ü–æ—á—É–ª–∏:", said);

                                                                                      if (triggerWords.some(word => said.includes(word))) {
                                                                                              speak("–©–æ —Å–∞–º–µ –≤–∞—Å —Ü—ñ–∫–∞–≤–∏—Ç—å?");
                                                                                                      recognition.start();
                                                                                                              return;
                                                                                                                    }

                                                                                                                          const gptResponse = await askGPT(said);
                                                                                                                                speak(gptResponse);
                                                                                                                                    };

                                                                                                                                        recognition.onerror = (event) => {
                                                                                                                                              console.error("–ü–æ–º–∏–ª–∫–∞ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è:", event.error);
                                                                                                                                                    speak("–í–∏–±–∞—á, —â–æ—Å—å –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫.");
                                                                                                                                                        };

                                                                                                                                                            function speak(text) {
                                                                                                                                                                  const utter = new SpeechSynthesisUtterance(text);
                                                                                                                                                                        utter.lang = 'uk-UA';
                                                                                                                                                                              synth.speak(utter);
                                                                                                                                                                                  }

                                                                                                                                                                                      async function askGPT(prompt) {
                                                                                                                                                                                            try {
                                                                                                                                                                                                    const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
                                                                                                                                                                                                              method: "POST",
                                                                                                                                                                                                                        headers: {
                                                                                                                                                                                                                                    "Content-Type": "application/json",
                                                                                                                                                                                                                                                "Authorization": `Bearer ${openRouterKey}`
                                                                                                                                                                                                                                                          },
                                                                                                                                                                                                                                                                    body: JSON.stringify({
                                                                                                                                                                                                                                                                                model: "openai/gpt-3.5-turbo",
                                                                                                                                                                                                                                                                                            messages: [{ role: "user", content: prompt }]
                                                                                                                                                                                                                                                                                                      })
                                                                                                                                                                                                                                                                                                              });

                                                                                                                                                                                                                                                                                                                      const data = await response.json();
                                                                                                                                                                                                                                                                                                                              return data.choices?.[0]?.message?.content || "–Ø –Ω–µ –∑–º–æ–≥–ª–∞ –¥–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å.";
                                                                                                                                                                                                                                                                                                                                    } catch (e) {
                                                                                                                                                                                                                                                                                                                                            console.error("GPT error:", e);
                                                                                                                                                                                                                                                                                                                                                    return "–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞ –ø—ñ–¥ —á–∞—Å –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ GPT.";
                                                                                                                                                                                                                                                                                                                                                          }
                                                                                                                                                                                                                                                                                                                                                              }
                                                                                                                                                                                                                                                                                                                                                                </script>
                                                                                                                                                                                                                                                                                                                                                                </body>
                                                                                                                                                                                                                                                                                                                                                                </html>